{"version":"V2.0","versionNumber":"V2.1.7","type":"stickc-plus","components":[{"name":"screen","type":"screen","layer":0,"screenId":"builtin","screenName":"","id":"__stickc-plus_screen","createTime":1729584169546,"x":0,"y":0,"width":135,"height":240,"backgroundColor":"#000000","size":0,"isSelected":true},{"name":"seconds_label","type":"label","layer":2,"screenId":"builtin","screenName":"","id":"xH1-Qv*i^IJ+_2F8","createTime":1729673118209,"x":154,"y":50,"color":"#007700","backgroundColor":"#000000","text":" ","engine":"gfx","font":"Widgets.FONTS.DejaVu40","rotation":0,"isSelected":false},{"name":"minutes_label","type":"label","layer":2,"screenId":"builtin","screenName":"","id":"rtQbAf-ICMe=^mq_","createTime":1729673118209,"x":80,"y":50,"color":"#007700","backgroundColor":"#000000","text":" ","engine":"gfx","font":"Widgets.FONTS.DejaVu40","rotation":0,"isSelected":false},{"name":"hours_label","type":"label","layer":2,"screenId":"builtin","screenName":"","id":"bdcHqzDK1N1RiZ&7","createTime":1729673118209,"x":30,"y":50,"color":"#007700","backgroundColor":"#000000","text":" ","engine":"gfx","font":"Widgets.FONTS.DejaVu40","rotation":0,"isSelected":false},{"name":"start1","type":"label","layer":1,"screenId":"builtin","screenName":"","id":"c9tX1UX_K^dqk+SD","createTime":1729673118209,"x":10,"y":30,"color":"#007700","backgroundColor":"#000000","text":" ","engine":"gfx","font":"Widgets.FONTS.DejaVu40","rotation":0,"isSelected":false},{"name":"start2","type":"label","layer":1,"screenId":"builtin","screenName":"","id":"h=LInM9K*xoQ^xCq","createTime":1729673118209,"x":12,"y":70,"color":"#007700","backgroundColor":"#000000","text":" ","engine":"gfx","font":"Widgets.FONTS.DejaVu40","rotation":0,"isSelected":false},{"name":"hm","type":"label","layer":2,"screenId":"builtin","screenName":"","id":"oopW2`_EpM=hBii3","createTime":1729673118209,"x":58,"y":37,"color":"#003300","backgroundColor":"#000000","text":" ","engine":"gfx","font":"Widgets.FONTS.DejaVu56","rotation":0,"isSelected":false},{"name":"ms","type":"label","layer":2,"screenId":"builtin","screenName":"","id":"lTz-`%IH%O@ilkUc","createTime":1729673118209,"x":132,"y":37,"color":"#003300","backgroundColor":"#000000","text":" ","engine":"gfx","font":"Widgets.FONTS.DejaVu56","rotation":0,"isSelected":false},{"name":"connection_status","type":"label","layer":1,"screenId":"builtin","screenName":"","id":"di64#jSMnmeaQsgF","createTime":1729673118209,"x":8,"y":7,"color":"#ffffff","backgroundColor":"#000000","text":" ","engine":"gfx","font":"Widgets.FONTS.DejaVu24","rotation":0,"isSelected":false},{"name":"border","type":"rect","layer":3,"screenId":"builtin","screenName":"","id":"lBGSA0*w^JG_L9P$","createTime":1730972903899,"x":2,"y":2,"width":130,"height":235,"borderColor":"#005000","backgroundColor":"#000000","isSelected":false}],"resources":[{"hardware":["pin","hardware_button","uart","imu","rgb","i2c","speaker","timer","display"]}],"units":[],"hats":[],"bases":[],"i2cs":[{"id":"i2c0","portType":"A","userPort":[22,21],"freq":"100000"}],"blockly":"<variables><variable id=\"2ml]$FG(OPWEl$KgtCLL\">server</variable><variable id=\"-t3)HUcz;-p4]QIvFf~j\">client_handle</variable><variable id=\"LDp8_ZYE)OmgVbk7axN(\">char2_uuid</variable><variable id=\"XPR;943GNwm2~p$v+m_@\">minutes</variable><variable id=\"~Um,SMgj_E*~eD1Y-Seg\">seconds</variable><variable id=\"OKni]M^Afs2N)lK9@Y:g\">service_uuid</variable><variable id=\"]uGYc+Rl`/dv;;R7c8tq\">hours</variable><variable id=\"%=X!Y{3v/H^=,4JR}$}j\">char_uuid</variable></variables><block type=\"m5ble_server_on_receive\" id=\"|#RH69-7aMf3(;gdVlif\" x=\"-230\" y=\"-250\"><value name=\"SERVER\"><block type=\"variables_get\" id=\"nttu326StLHh/licCv+s\"><field name=\"VAR\" id=\"2ml]$FG(OPWEl$KgtCLL\">server</field></block></value><value name=\"HANDLE\"><block type=\"variables_get\" id=\"3VFo+%LDr4LoWK/9~!`K\"><field name=\"VAR\" id=\"-t3)HUcz;-p4]QIvFf~j\">client_handle</field></block></value><statement name=\"FUNC\"><block type=\"time_sleep_millisecond\" id=\"Ktg%VQ]1@F)ccdvzrQzY\"><value name=\"MS\"><shadow type=\"math_number\" id=\"B-?H7:^NWa[9D3jwF{g[\"><mutation max=\"Infinity\" min=\"0\" precision=\"0\"></mutation><field name=\"NUM\">1</field></shadow></value><next><block type=\"m5ble_handle_write\" id=\"pg3?Fy?uj/3Ky~Jb=Q[p\"><value name=\"HANDLE\"><block type=\"variables_get\" id=\"y!jyA$n0{IcbtSdV$+gX\"><field name=\"VAR\" id=\"-t3)HUcz;-p4]QIvFf~j\">client_handle</field></block></value><value name=\"DATA\"><shadow type=\"text\" id=\"AeRh:5qX55b.yOC[_EU1\"><field name=\"TEXT\">123</field></shadow><block type=\"text_convert_str\" id=\"_ADZUb+ow/eijJw3X_[8\"><value name=\"VALUE\"><block type=\"time_get_local_time\" id=\"?ysK4qBl+O)siRxh-c=o\"></block></value></block></value><value name=\"CHAR_UUID\"><shadow type=\"text\" id=\"lSi,l2A|dQ`+wJ+xxjSC\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\" id=\"2pYU_UU?!s$siVfxW_@i\"><field name=\"VAR\" id=\"LDp8_ZYE)OmgVbk7axN(\">char2_uuid</field></block></value><next><block type=\"label_set_color_multiple\" id=\"ttff|5uzQM:x7j5^Cm][\"><field name=\"NAME\">start1</field><value name=\"COLOR\"><block type=\"color_rgb_palette\" id=\"e.3NQ%v}8+6qXw$Gl9m?\"><mutation mode=\"palette\"></mutation><field name=\"MODE\">palette</field><field name=\"COLOR\">#33ccff</field></block></value><value name=\"BG_COLOR\"><block type=\"color_rgb_palette\" id=\"0%[C2:]dW%qqGtPl5pWx\"><mutation mode=\"palette\"></mutation><field name=\"MODE\">palette</field><field name=\"COLOR\">#000000</field></block></value></block></next></block></next></block></statement></block><block type=\"text_add_str\" id=\"~S,lT}ZK1$/#0AE;EFi5\" disabled=\"true\" x=\"90\" y=\"-170\"><value name=\"VALUE1\"><shadow type=\"text\" id=\"B`fq;Z]QT$$,$U0:i[T4\" disabled=\"true\"><field name=\"TEXT\">hello M5</field></shadow></value><value name=\"VALUE2\"><block type=\"text_convert_str\" id=\"}IQPWPb!_.9?C;D!bB,p\" disabled=\"true\"><value name=\"VALUE\"><block type=\"imu_get_accel\" id=\"Vo8QRp49)1(aDyc.~O7z\" disabled=\"true\"></block></value></block></value></block><block type=\"timer_callback\" id=\"q^[M{y`tPgnaj#rRHQCl\" x=\"-370\" y=\"-30\"><field name=\"NAME\">0</field><statement name=\"FUNC\"><block type=\"m5ble_handle_write\" id=\"/qb|K+-:n~(S2=nFIO!h\"><value name=\"HANDLE\"><block type=\"variables_get\" id=\"Z#pCj-%$1lZ$q!tF}b)S\"><field name=\"VAR\" id=\"-t3)HUcz;-p4]QIvFf~j\">client_handle</field></block></value><value name=\"DATA\"><shadow type=\"text\" id=\"AeRh:5qX55b.yOC[_EU1\"><field name=\"TEXT\">123</field></shadow><block type=\"text_convert_str\" id=\"ruRAgMaPHDGV/ER9;}Ib\"><value name=\"VALUE\"><block type=\"time_get_local_time\" id=\"Dz--hIe?3_xJ=aod[.zR\"></block></value></block></value><value name=\"CHAR_UUID\"><shadow type=\"text\" id=\"lSi,l2A|dQ`+wJ+xxjSC\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\" id=\";Ny_QUzqBFA7/#]+0Px,\"><field name=\"VAR\" id=\"LDp8_ZYE)OmgVbk7axN(\">char2_uuid</field></block></value><next><block type=\"label_set_color_multiple\" id=\"m?5S*|kq3FUuj9;@i_YO\"><field name=\"NAME\">start1</field><value name=\"COLOR\"><block type=\"color_rgb_palette\" id=\")]yk`K5Mz9lc6qA-dr,w\"><mutation mode=\"palette\"></mutation><field name=\"MODE\">palette</field><field name=\"COLOR\">#ffcc33</field></block></value><value name=\"BG_COLOR\"><block type=\"color_rgb_palette\" id=\"iYAfKS)Jc;Jg|J^ztf5~\"><mutation mode=\"palette\"></mutation><field name=\"MODE\">palette</field><field name=\"COLOR\">#000000</field></block></value></block></next></block></statement></block><block type=\"basic_on_setup\" id=\"setup_block\" deletable=\"false\" x=\"-310\" y=\"90\"><mutation isBegin=\"true\"></mutation><field name=\"UPDATEOP\">true</field><statement name=\"FUNC\"><block type=\"system_m5_begin\" id=\"system_m5_begin\"><next><block type=\"i2c_init\" id=\"SEwgtyU6`/q`VBAj]nv{\"><field name=\"NAME\">0</field><field name=\"FREQ\">100000</field><value name=\"SCL\"><shadow type=\"math_number\" id=\"YWo3[)E]#hi!pmIgRs5%\"><mutation max=\"Infinity\" min=\"0\" precision=\"0\"></mutation><field name=\"NUM\">33</field></shadow></value><value name=\"SDA\"><shadow type=\"math_number\" id=\"{4gFoED0R!pB8C7gAl1}\"><mutation max=\"Infinity\" min=\"0\" precision=\"0\"></mutation><field name=\"NUM\">32</field></shadow></value><next><block type=\"m5ble_init\" id=\"AMaAzs.j)Njt$6~6Xm=}\"><value name=\"VALUE\"><shadow type=\"text\" id=\"JB*jYl3+`48)F=Eca`mx\"><field name=\"TEXT\">M5UiFlow</field></shadow></value><next><block type=\"variables_set\" id=\"e0WK{f:z*1+[K]?f^KD_\"><field name=\"VAR\" id=\"OKni]M^Afs2N)lK9@Y:g\">service_uuid</field><value name=\"VALUE\"><block type=\"text\" id=\"~aNp|y(dn~X@]U-2LC!y\"><field name=\"TEXT\">6F34165C-D685-94A2-CFC1-57C14F328B83</field></block></value><next><block type=\"variables_set\" id=\"6Zlk-{3H*zvpH%w6AT=1\"><field name=\"VAR\" id=\"%=X!Y{3v/H^=,4JR}$}j\">char_uuid</field><value name=\"VALUE\"><block type=\"text\" id=\"Kw`O(}FmE!g]4N9Dh2w/\"><field name=\"TEXT\">AE4B02CC-DF79-6EF4-51D8-36EB0E0B0F13</field></block></value><next><block type=\"variables_set\" id=\"(HjUhIZe)@nSl}l1GBXY\"><field name=\"VAR\" id=\"LDp8_ZYE)OmgVbk7axN(\">char2_uuid</field><value name=\"VALUE\"><block type=\"text\" id=\"9}|5^NU0i7T=hx?6W6/t\"><field name=\"TEXT\">AE4B02CC-DF79-6EF4-51D8-36EB0E0B0F14</field></block></value><next><block type=\"time_set_timezone\" id=\"2}H+EjN-v%I%_NdZp3(F\"><value name=\"TIMEZONE\"><shadow type=\"time_timezone_option\" id=\"),WZItg3,/LK/(Bs1`0K\"><field name=\"TIMEZONE\">GMT-1</field></shadow></value><next><block type=\"set_screen_brightness\" id=\"ZP9uC)4[TaYv7jxYo{$_\"><field name=\"SCREEN\">builtin</field><value name=\"BRIGHTNESS\"><shadow type=\"math_slider\" id=\"iU0s;B~jHG#usKetuJfb\"><mutation max=\"255\" min=\"0\" step=\"1\" precision=\"1\"></mutation><field name=\"NUM\">150</field></shadow></value><next><block type=\"set_screen_rotation\" id=\"ECT;JlR2U42q|[a_X_jm\"><field name=\"ROTATION\">3</field><field name=\"SCREEN\">builtin</field><next><block type=\"m5ble_server_add_service\" id=\"xvLxi7Sf)PFfaj?A!mo!\"><value name=\"UUID\"><block type=\"variables_get\" id=\"`C;UUf]wfIsJX;6zVk#q\"><field name=\"VAR\" id=\"OKni]M^Afs2N)lK9@Y:g\">service_uuid</field></block></value><value name=\"LIST\"><block type=\"lists_create_with\" id=\"tRAXDsFkKnb#+0mT]DUj\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><block type=\"m5ble_server_create_characteristic\" id=\"||S{gb[(kEBO}5!TensV\"><value name=\"UUID\"><block type=\"variables_get\" id=\"$7FOryibcXH7$5Y*A}bO\"><field name=\"VAR\" id=\"%=X!Y{3v/H^=,4JR}$}j\">char_uuid</field></block></value><value name=\"READ\"><shadow type=\"m5ble_switch_option\" id=\"*RXTv1j+#|Ka%j]wbDmM\"><field name=\"OPTION\">False</field></shadow></value><value name=\"NOTIFY\"><shadow type=\"m5ble_switch_option\" id=\"[(.X!jHby[`6arQ..qsZ\"><field name=\"OPTION\">False</field></shadow></value><value name=\"WRITE\"><shadow type=\"m5ble_switch_option\" id=\".j,:oIx@Eur[XrGd5`g/\"><field name=\"OPTION\">True</field></shadow></value></block></value><value name=\"ADD1\"><block type=\"m5ble_server_create_characteristic\" id=\"9GkG7J4?E#_GG$mmpSfd\"><value name=\"UUID\"><block type=\"variables_get\" id=\"i@RgV*fe}%Wz=E)^9flf\"><field name=\"VAR\" id=\"LDp8_ZYE)OmgVbk7axN(\">char2_uuid</field></block></value><value name=\"READ\"><shadow type=\"m5ble_switch_option\" id=\"Q86-f#@OLLnCf%/S+hXf\"><field name=\"OPTION\">True</field></shadow></value><value name=\"NOTIFY\"><shadow type=\"m5ble_switch_option\" id=\"GTKcrKGlG{+^gS@BW}Vo\"><field name=\"OPTION\">True</field></shadow></value><value name=\"WRITE\"><shadow type=\"m5ble_switch_option\" id=\"Qve$${2,*Wyk75I+hI,M\"><field name=\"OPTION\">True</field></shadow></value></block></value></block></value><next><block type=\"m5ble_server_start\" id=\"1--p21EXBuaghvj21%^t\"><value name=\"INTERVAL\"><shadow type=\"math_number\" id=\"SlCofgVF]KO^er#k6Y+C\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">500000</field></shadow></value><next><block type=\"label_set_color_multiple\" id=\"YecYWZf+]KxO}C$*V9P3\"><field name=\"NAME\">connection_status</field><value name=\"COLOR\"><block type=\"color_rgb_palette\" id=\"4*:SnNiBO97d},@_[2?-\"><mutation mode=\"palette\"></mutation><field name=\"MODE\">palette</field><field name=\"COLOR\">#ffffff</field></block></value><value name=\"BG_COLOR\"><block type=\"color_rgb_palette\" id=\"$uw_.Im)@#pe[F{!,jJ?\"><mutation mode=\"palette\"></mutation><field name=\"MODE\">palette</field><field name=\"COLOR\">#000000</field></block></value><next><block type=\"label_set_text\" id=\"nbHqG/u_Npl)QL*+n8:`\"><field name=\"NAME\">connection_status</field><value name=\"TEXT\"><shadow type=\"text\" id=\"vk.|(N?!_Lk}KY@$1lkv\"><field name=\"TEXT\">Connecting...</field></shadow></value><next><block type=\"timer_init\" id=\"H{gW{a=saCq!+Y3lP`#m\"><field name=\"NAME\">0</field><next><block type=\"timer_init\" id=\"^bH:q^*lq{ba[cvdpb0:\"><field name=\"NAME\">1</field><next><block type=\"timer_set_mode\" id=\"jZufcmbWpw!EcT8zquWp\"><field name=\"NAME\">0</field><field name=\"MODE\">PERIODIC</field><value name=\"PERIOD\"><shadow type=\"math_number\" id=\"I6-AM*cf5g7tu0,t[ZgH\"><mutation max=\"Infinity\" min=\"0\" precision=\"0\"></mutation><field name=\"NUM\">1000</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"timer_callback\" id=\"IrgcXb@:,v2-n`Gq+~Bg\" x=\"730\" y=\"90\"><field name=\"NAME\">1</field><statement name=\"FUNC\"><block type=\"controls_if\" id=\"br9E0H{y59!$qb:fQkE4\"><value name=\"IF0\"><block type=\"logic_compare\" id=\".o7|zCwNV(7+f8bVhRNe\"><field name=\"OP\">GTE</field><value name=\"A\"><block type=\"variables_get\" id=\"iW0R-m0s?#G?C-@{0?Nf\"><field name=\"VAR\" id=\"~Um,SMgj_E*~eD1Y-Seg\">seconds</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"Zx^VVqiRI#?Rkdr*?V+#\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">59</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\" id=\"|ZaN2BsStV]I6fSV/XGo\"><field name=\"VAR\" id=\"XPR;943GNwm2~p$v+m_@\">minutes</field><value name=\"VALUE\"><block type=\"math_arithmetic\" id=\"{6b]YCd`VzdusLvy%C$R\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\" id=\"C2l2]QD@Qzkv)[wx%^$p\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">1</field></shadow><block type=\"variables_get\" id=\"o9DiCw38^##uKig3{/p4\"><field name=\"VAR\" id=\"XPR;943GNwm2~p$v+m_@\">minutes</field></block></value><value name=\"B\"><shadow type=\"math_number\" id=\"Z`cDEa=n}W7-Av]Q?03y\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">1</field></shadow></value></block></value><next><block type=\"variables_set\" id=\"NG6Qe5xds;cnH}6*#X:o\"><field name=\"VAR\" id=\"~Um,SMgj_E*~eD1Y-Seg\">seconds</field><value name=\"VALUE\"><block type=\"math_number\" id=\"gXPR1?M7_KCX)6|/r:Ui\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">-1</field></block></value><next><block type=\"controls_if\" id=\"iHZ*t3@$dikDn1RyCg;}\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"cmE5M`G:RGn.0B!:{+9+\"><field name=\"OP\">GTE</field><value name=\"A\"><block type=\"variables_get\" id=\",w9h+74qGfQ*./x@.kvr\"><field name=\"VAR\" id=\"XPR;943GNwm2~p$v+m_@\">minutes</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"K#xBx7MZX$=5Ubl@MR;j\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">59</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\" id=\"Wj8YQVUz_hOdDi9rZ5`-\"><field name=\"VAR\" id=\"]uGYc+Rl`/dv;;R7c8tq\">hours</field><value name=\"VALUE\"><block type=\"math_arithmetic\" id=\"w7_%MWxe7L;LV;Uu%J}!\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\" id=\"C2l2]QD@Qzkv)[wx%^$p\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">1</field></shadow><block type=\"variables_get\" id=\"F3*RzptEo%NUa/tYXzpx\"><field name=\"VAR\" id=\"]uGYc+Rl`/dv;;R7c8tq\">hours</field></block></value><value name=\"B\"><shadow type=\"math_number\" id=\"VriMzYul)aAs79BF##=L\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">1</field></shadow></value></block></value><next><block type=\"variables_set\" id=\"/*6@7D2]S;8?a/|2Q,NC\"><field name=\"VAR\" id=\"XPR;943GNwm2~p$v+m_@\">minutes</field><value name=\"VALUE\"><block type=\"math_number\" id=\"Rx_R15GECqd}g3Mn!f=t\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">0</field></block></value></block></next></block></statement></block></next></block></next></block></statement><next><block type=\"variables_set\" id=\"BN:CEg~3zKU.|Z/{7V4#\"><field name=\"VAR\" id=\"~Um,SMgj_E*~eD1Y-Seg\">seconds</field><value name=\"VALUE\"><block type=\"math_arithmetic\" id=\"l}3a-}FL4knf!jcuoOR|\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\" id=\"C2l2]QD@Qzkv)[wx%^$p\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">1</field></shadow><block type=\"variables_get\" id=\"~}qyGYf;Dl@`P6lX{!=K\"><field name=\"VAR\" id=\"~Um,SMgj_E*~eD1Y-Seg\">seconds</field></block></value><value name=\"B\"><shadow type=\"math_number\" id=\"*?_R*8F1+}n9l{zjHev,\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">1</field></shadow></value></block></value><next><block type=\"label_set_text\" id=\"s.*7Dfm0*g610IFC4?YE\"><field name=\"NAME\">seconds_label</field><value name=\"TEXT\"><shadow type=\"text\" id=\"j-3UjN@vVcTIkh,?+5R-\"><field name=\"TEXT\">Label</field></shadow><block type=\"variables_get\" id=\"@==DqHtyHf)E@4%]}D*W\"><field name=\"VAR\" id=\"~Um,SMgj_E*~eD1Y-Seg\">seconds</field></block></value><next><block type=\"label_set_text\" id=\"kfZs.ymYXz(%;dsj:-)j\"><field name=\"NAME\">minutes_label</field><value name=\"TEXT\"><shadow type=\"text\" id=\"j-3UjN@vVcTIkh,?+5R-\"><field name=\"TEXT\">Label</field></shadow><block type=\"variables_get\" id=\"e;kXOw4!P1[TTp89e}k:\"><field name=\"VAR\" id=\"XPR;943GNwm2~p$v+m_@\">minutes</field></block></value><next><block type=\"label_set_text\" id=\"(nJxXt}CeXLD-%Va#yJ!\"><field name=\"NAME\">hours_label</field><value name=\"TEXT\"><shadow type=\"text\" id=\"j-3UjN@vVcTIkh,?+5R-\"><field name=\"TEXT\">Label</field></shadow><block type=\"variables_get\" id=\"tfBsh,*+W3%n#X~79*am\"><field name=\"VAR\" id=\"]uGYc+Rl`/dv;;R7c8tq\">hours</field></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type=\"basic_on_loop\" id=\"loop_block\" deletable=\"false\" x=\"410\" y=\"110\"><mutation isUpdate=\"true\"></mutation><field name=\"UPDATEOP\">true</field><statement name=\"FUNC\"><block type=\"system_m5_update\" id=\"system_m5_update\"><next><block type=\"controls_if\" id=\"%=?VLEHd9ywqK,aM?t14\"><value name=\"IF0\"><block type=\"button_get_status\" id=\"G8s2gXKYuUlD*gjA7jce\"><field name=\"NAME\">BtnA</field><field name=\"OPTION\">wasClicked</field></block></value><statement name=\"DO0\"><block type=\"label_set_visible\" id=\"HvRR.NN#r:O~O%)HZ+LN\"><field name=\"NAME\">start1</field><field name=\"VISIBLE\">False</field><next><block type=\"label_set_visible\" id=\",[TAy|Vh}6[T}[IM59(%\"><field name=\"NAME\">start2</field><field name=\"VISIBLE\">False</field><next><block type=\"label_set_text\" id=\"l?9]M35cksW~|K_M-yd/\"><field name=\"NAME\">hm</field><value name=\"TEXT\"><shadow type=\"text\" id=\"t`R])-^#;L5pD8{6HUcj\"><field name=\"TEXT\">:</field></shadow></value><next><block type=\"label_set_text\" id=\"x3swaAGQ[x#CYlDyIJ#F\"><field name=\"NAME\">ms</field><value name=\"TEXT\"><shadow type=\"text\" id=\"Y?CC=xJKyWpo,9WOH9Nt\"><field name=\"TEXT\">:</field></shadow></value><next><block type=\"variables_set\" id=\"_GoK!u?cAt}aM8$m_97t\"><field name=\"VAR\" id=\"~Um,SMgj_E*~eD1Y-Seg\">seconds</field><value name=\"VALUE\"><block type=\"math_number\" id=\";SI.2P?+c4Bmu?39W/Pi\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">-1</field></block></value><next><block type=\"variables_set\" id=\"N-6-^7OWc)r4;tl~ymR(\"><field name=\"VAR\" id=\"XPR;943GNwm2~p$v+m_@\">minutes</field><value name=\"VALUE\"><block type=\"math_number\" id=\"A97p@Hv,,lXSH0ih(wt#\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">0</field></block></value><next><block type=\"variables_set\" id=\"Gl?k)vZsll@q9SRt_EA)\"><field name=\"VAR\" id=\"]uGYc+Rl`/dv;;R7c8tq\">hours</field><value name=\"VALUE\"><block type=\"math_number\" id=\"3ID6#E}DW^xlHi1=3eXl\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">0</field></block></value><next><block type=\"label_set_visible\" id=\"[2H/w.(l7nU)yblfA!5l\"><field name=\"NAME\">seconds_label</field><field name=\"VISIBLE\">True</field><next><block type=\"label_set_visible\" id=\"DJze+OG;S03hymw{;Rl`\"><field name=\"NAME\">minutes_label</field><field name=\"VISIBLE\">True</field><next><block type=\"label_set_visible\" id=\"Gbe?a)6y@_W2%=[=tls.\"><field name=\"NAME\">hours_label</field><field name=\"VISIBLE\">True</field><next><block type=\"label_set_visible\" id=\";{OiH6KW1S9ryRG3;0%6\"><field name=\"NAME\">hm</field><field name=\"VISIBLE\">True</field><next><block type=\"label_set_visible\" id=\"av]viCQ*$3Cxf|3=@t{!\"><field name=\"NAME\">ms</field><field name=\"VISIBLE\">True</field><next><block type=\"timer_set_mode\" id=\"OJEcy#ziu+S3U[s1n7}3\"><field name=\"NAME\">1</field><field name=\"MODE\">PERIODIC</field><value name=\"PERIOD\"><shadow type=\"math_number\" id=\"3)UEtuvMhso*(nhkg-n8\"><mutation max=\"Infinity\" min=\"0\" precision=\"0\"></mutation><field name=\"NUM\">1000</field></shadow></value><next><block type=\"m5ble_handle_write\" id=\"}4zQbrhcQJ12c=Bb=lW+\"><value name=\"HANDLE\"><block type=\"variables_get\" id=\"vD6MbfHj?NF)#i(_rf5e\"><field name=\"VAR\" id=\"-t3)HUcz;-p4]QIvFf~j\">client_handle</field></block></value><value name=\"DATA\"><shadow type=\"text\" id=\"sa$sc/jqH`(MAAaO0@*_\"><field name=\"TEXT\">Run started</field></shadow></value><value name=\"CHAR_UUID\"><shadow type=\"text\" id=\"lSi,l2A|dQ`+wJ+xxjSC\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\" id=\"TVE5iq$vl$MyqR#LLR)!\"><field name=\"VAR\" id=\"LDp8_ZYE)OmgVbk7axN(\">char2_uuid</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><next><block type=\"controls_if\" id=\"IKJ`kOPJ/$t%d)C9Z/lu\"><value name=\"IF0\"><block type=\"button_get_status\" id=\"Tw|Pr,aIlW[YF6Yl4:uc\"><field name=\"NAME\">BtnA</field><field name=\"OPTION\">wasHold</field></block></value><statement name=\"DO0\"><block type=\"timer_set_mode\" id=\"/D11A:Yi~4x]4;xW9EJi\"><field name=\"NAME\">1</field><field name=\"MODE\">ONE_SHOT</field><value name=\"PERIOD\"><shadow type=\"math_number\" id=\"L+sXp^?u+ZW+my_T@{{V\"><mutation max=\"Infinity\" min=\"0\" precision=\"0\"></mutation><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\" id=\"p:Buw(6zR9hLzm@x_pX~\"><field name=\"VAR\" id=\"~Um,SMgj_E*~eD1Y-Seg\">seconds</field><value name=\"VALUE\"><block type=\"math_arithmetic\" id=\"O~U*X:4wPlaq]6/1SWYQ\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\" id=\"C2l2]QD@Qzkv)[wx%^$p\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">1</field></shadow><block type=\"variables_get\" id=\")*@jlF/nM%.w5]!XofH2\"><field name=\"VAR\" id=\"~Um,SMgj_E*~eD1Y-Seg\">seconds</field></block></value><value name=\"B\"><shadow type=\"math_number\" id=\"5Q?3$p=B0E#GY}-gKUj/\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">1</field></shadow></value></block></value><next><block type=\"m5ble_handle_write\" id=\"H1D~/-gO:I52{uS4F_%`\"><value name=\"HANDLE\"><block type=\"variables_get\" id=\"EKYJ}.b].1b:,OPSvXWc\"><field name=\"VAR\" id=\"-t3)HUcz;-p4]QIvFf~j\">client_handle</field></block></value><value name=\"DATA\"><shadow type=\"text\" id=\"].BfDlz7KCL%%~6nDo`k\"><field name=\"TEXT\">Run finished</field></shadow></value><value name=\"CHAR_UUID\"><shadow type=\"text\" id=\"lSi,l2A|dQ`+wJ+xxjSC\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\" id=\"5Zk:m^s6l9SKYAI$xvN5\"><field name=\"VAR\" id=\"LDp8_ZYE)OmgVbk7axN(\">char2_uuid</field></block></value></block></next></block></next></block></statement><next><block type=\"controls_if\" id=\"I6Fy*Jd:]^*fk%4B5+?0\"><value name=\"IF0\"><block type=\"button_get_status\" id=\"8nKrz.%6A$#7PVdTOA?b\"><field name=\"NAME\">BtnB</field><field name=\"OPTION\">wasClicked</field></block></value><statement name=\"DO0\"><block type=\"label_set_visible\" id=\"+[6N%Qk%y?7H{Vv0QMaX\"><field name=\"NAME\">start1</field><field name=\"VISIBLE\">True</field><next><block type=\"label_set_visible\" id=\"w%E08#*;yes}O;3zFu7@\"><field name=\"NAME\">start2</field><field name=\"VISIBLE\">True</field></block></next></block></statement></block></next></block></next></block></next></block></statement></block><block type=\"m5ble_server_on_disconnected\" id=\"ezK7Fbwj,,kZeA3e%.BU\" x=\"130\" y=\"870\"><value name=\"SERVER\"><block type=\"variables_get\" id=\"bn|+Wb+SsVoZn-2;`gZ;\"><field name=\"VAR\" id=\"2ml]$FG(OPWEl$KgtCLL\">server</field></block></value><value name=\"HANDLE\"><block type=\"variables_get\" id=\"mc%9N_o},dUg]fq3q9w`\"><field name=\"VAR\" id=\"-t3)HUcz;-p4]QIvFf~j\">client_handle</field></block></value><statement name=\"FUNC\"><block type=\"label_set_visible\" id=\",1S}mD^!6yNpl7-7A.1B\"><field name=\"NAME\">connection_status</field><field name=\"VISIBLE\">True</field><next><block type=\"label_set_color_multiple\" id=\"j4@%lh.$7Pu(@GqyaB1r\"><field name=\"NAME\">connection_status</field><value name=\"COLOR\"><block type=\"color_rgb_palette\" id=\"+VHpYUuOzhOzd@-}D76E\"><mutation mode=\"palette\"></mutation><field name=\"MODE\">palette</field><field name=\"COLOR\">#cc0000</field></block></value><value name=\"BG_COLOR\"><block type=\"color_rgb_palette\" id=\"W`$$;me_k%dDs}GHD_.;\"><mutation mode=\"palette\"></mutation><field name=\"MODE\">palette</field><field name=\"COLOR\">#000000</field></block></value><next><block type=\"label_set_text\" id=\"=ewqsH5|n=2`R2O:9#k4\"><field name=\"NAME\">connection_status</field><value name=\"TEXT\"><shadow type=\"text\" id=\"}6blp8c~ov_]qH}S_:30\"><field name=\"TEXT\">Disconnected</field></shadow></value></block></next></block></next></block></statement></block><block type=\"m5ble_server_on_connected\" id=\"Q+%NQTR~e}c1`Z-amUf@\" x=\"-310\" y=\"990\"><value name=\"SERVER\"><block type=\"variables_get\" id=\"ojslKwxy,Y*2e(luLw-8\"><field name=\"VAR\" id=\"2ml]$FG(OPWEl$KgtCLL\">server</field></block></value><value name=\"HANDLE\"><block type=\"variables_get\" id=\"E2zoCI-t}IfWX-kyqJ$g\"><field name=\"VAR\" id=\"-t3)HUcz;-p4]QIvFf~j\">client_handle</field></block></value><statement name=\"FUNC\"><block type=\"label_set_color_multiple\" id=\"Y:m/,|g_;..al{knmjE1\"><field name=\"NAME\">connection_status</field><value name=\"COLOR\"><block type=\"color_rgb_palette\" id=\"U:mcbgyX{YOdX$QY4~b[\"><mutation mode=\"palette\"></mutation><field name=\"MODE\">palette</field><field name=\"COLOR\">#33cc00</field></block></value><value name=\"BG_COLOR\"><block type=\"color_rgb_palette\" id=\"v-[AcGqH.=z2TN,EY=7.\"><mutation mode=\"palette\"></mutation><field name=\"MODE\">palette</field><field name=\"COLOR\">#000000</field></block></value><next><block type=\"label_set_text\" id=\"TIP?1m^}qg1in[Yl[:@|\"><field name=\"NAME\">connection_status</field><value name=\"TEXT\"><shadow type=\"text\" id=\"VsPNNPE*pxRLRFC5isTz\"><field name=\"TEXT\">Connected</field></shadow></value><next><block type=\"time_sleep_second\" id=\"weZt~y*+zvnd/t+AtyPR\"><value name=\"SECOND\"><shadow type=\"math_number\" id=\"8av7r|m_VJKLh).%;34l\"><mutation max=\"Infinity\" min=\"0\" precision=\"0\"></mutation><field name=\"NUM\">2</field></shadow></value><next><block type=\"label_set_text\" id=\"q%bW(U^@15gDU!3UGYLY\"><field name=\"NAME\">start1</field><value name=\"TEXT\"><shadow type=\"text\" id=\"+JLK7=O3o~aa7qw,oPpj\"><field name=\"TEXT\"> Press M5 </field></shadow></value><next><block type=\"label_set_text\" id=\"AD^Y`Zi%G3-/.~4njN8#\"><field name=\"NAME\">start2</field><value name=\"TEXT\"><shadow type=\"text\" id=\"#rKz_vo%}~@SpD;29cj,\"><field name=\"TEXT\">  to start  </field></shadow></value><next><block type=\"label_set_visible\" id=\"QvepAQa!IAtM!;zQJ`,4\"><field name=\"NAME\">connection_status</field><field name=\"VISIBLE\">False</field></block></next></block></next></block></next></block></next></block></next></block></statement></block>","screen":[{"simulationName":"Built-in","type":"builtin","width":135,"height":240,"scale":0.92,"screenName":"","blockId":"","screenColorType":0,"id":"builtin","createTime":1729584169546}],"logicWhenNum":0,"pythonCode":"import os, sys, io\nimport M5\nfrom M5 import *\nfrom hardware import *\nfrom m5ble import *\nimport time\n\n\n\nstart1 = None\nstart2 = None\nconnection_status = None\nseconds_label = None\nminutes_label = None\nhours_label = None\nhm = None\nms = None\nborder = None\ntimer0 = None\ntimer1 = None\nble = None\ni2c0 = None\n\n\nserver = None\nclient_handle = None\nchar2_uuid = None\nminutes = None\nseconds = None\nservice_uuid = None\nhours = None\nchar_uuid = None\n\n\ndef timer0_cb(t):\n  global start1, start2, connection_status, seconds_label, minutes_label, hours_label, hm, ms, border, timer0, timer1, ble, i2c0, server, client_handle, char2_uuid, minutes, seconds, service_uuid, hours, char_uuid\n  client_handle.write(str((time.time_ns())), char2_uuid)\n  start1.setColor(0xffcc33, 0x000000)\n\n\ndef timer1_cb(t):\n  global start1, start2, connection_status, seconds_label, minutes_label, hours_label, hm, ms, border, timer0, timer1, ble, i2c0, server, client_handle, char2_uuid, minutes, seconds, service_uuid, hours, char_uuid\n  if seconds >= 59:\n    minutes = minutes + 1\n    seconds = -1\n    if minutes >= 59:\n      hours = hours + 1\n      minutes = 0\n  seconds = seconds + 1\n  seconds_label.setText(str(seconds))\n  minutes_label.setText(str(minutes))\n  hours_label.setText(str(hours))\n\n\ndef ble_server_on_disconnected_event(args):\n  _server, _connected_client_handle = args\n  global start1, start2, connection_status, seconds_label, minutes_label, hours_label, hm, ms, border, timer0, timer1, ble, i2c0, server, client_handle, char2_uuid, minutes, seconds, service_uuid, hours, char_uuid\n  server = _server\n  client_handle = _connected_client_handle\n  connection_status.setVisible(True)\n  connection_status.setColor(0xcc0000, 0x000000)\n  connection_status.setText(str('Disconnected'))\n\n\ndef ble_server_on_connected_event(args):\n  _server, _connected_client_handle = args\n  global start1, start2, connection_status, seconds_label, minutes_label, hours_label, hm, ms, border, timer0, timer1, ble, i2c0, server, client_handle, char2_uuid, minutes, seconds, service_uuid, hours, char_uuid\n  server = _server\n  client_handle = _connected_client_handle\n  connection_status.setColor(0x33cc00, 0x000000)\n  connection_status.setText(str('Connected'))\n  time.sleep(2)\n  start1.setText(str(' Press M5 '))\n  start2.setText(str('  to start  '))\n  connection_status.setVisible(False)\n\n\ndef ble_server_on_receive_event(args):\n  _server, _connected_client_handle = args\n  global start1, start2, connection_status, seconds_label, minutes_label, hours_label, hm, ms, border, timer0, timer1, ble, i2c0, server, client_handle, char2_uuid, minutes, seconds, service_uuid, hours, char_uuid\n  server = _server\n  client_handle = _connected_client_handle\n  time.sleep_ms(1)\n  client_handle.write(str((time.time_ns())), char2_uuid)\n  start1.setColor(0x33ccff, 0x000000)\n\n\ndef setup():\n  global start1, start2, connection_status, seconds_label, minutes_label, hours_label, hm, ms, border, timer0, timer1, ble, i2c0, server, client_handle, char2_uuid, minutes, seconds, service_uuid, hours, char_uuid\n\n  M5.begin()\n  start1 = Widgets.Label(\" \", 10, 30, 1.0, 0x007700, 0x000000, Widgets.FONTS.DejaVu40)\n  start2 = Widgets.Label(\" \", 12, 70, 1.0, 0x007700, 0x000000, Widgets.FONTS.DejaVu40)\n  connection_status = Widgets.Label(\" \", 8, 7, 1.0, 0xffffff, 0x000000, Widgets.FONTS.DejaVu24)\n  seconds_label = Widgets.Label(\" \", 154, 50, 1.0, 0x007700, 0x000000, Widgets.FONTS.DejaVu40)\n  minutes_label = Widgets.Label(\" \", 80, 50, 1.0, 0x007700, 0x000000, Widgets.FONTS.DejaVu40)\n  hours_label = Widgets.Label(\" \", 30, 50, 1.0, 0x007700, 0x000000, Widgets.FONTS.DejaVu40)\n  hm = Widgets.Label(\" \", 58, 37, 1.0, 0x003300, 0x000000, Widgets.FONTS.DejaVu56)\n  ms = Widgets.Label(\" \", 132, 37, 1.0, 0x003300, 0x000000, Widgets.FONTS.DejaVu56)\n  border = Widgets.Rectangle(2, 2, 130, 235, 0x005000, 0x000000)\n\n  i2c0 = I2C(0, scl=Pin(33), sda=Pin(32), freq=100000)\n  ble = M5BLE.Device('M5UiFlow')\n  ble.server.on_disconnected(ble_server_on_disconnected_event)\n  ble.server.on_connected(ble_server_on_connected_event)\n  ble.server.on_receive(ble_server_on_receive_event)\n  service_uuid = '6F34165C-D685-94A2-CFC1-57C14F328B83'\n  char_uuid = 'AE4B02CC-DF79-6EF4-51D8-36EB0E0B0F13'\n  char2_uuid = 'AE4B02CC-DF79-6EF4-51D8-36EB0E0B0F14'\n  time.timezone('GMT-1')\n  Widgets.setBrightness(150)\n  Widgets.setRotation(3)\n  ble.server.add_service(service_uuid, [ble.server.create_characteristic(char_uuid, False, True, False), ble.server.create_characteristic(char2_uuid, True, True, True)])\n  ble.server.start(500000)\n  connection_status.setColor(0xffffff, 0x000000)\n  connection_status.setText(str('Connecting...'))\n  timer0 = Timer(0)\n  timer1 = Timer(1)\n  timer0.init(mode=Timer.PERIODIC, period=1000, callback=timer0_cb)\n\n\ndef loop():\n  global start1, start2, connection_status, seconds_label, minutes_label, hours_label, hm, ms, border, timer0, timer1, ble, i2c0, server, client_handle, char2_uuid, minutes, seconds, service_uuid, hours, char_uuid\n  M5.update()\n  if BtnA.wasClicked():\n    start1.setVisible(False)\n    start2.setVisible(False)\n    hm.setText(str(':'))\n    ms.setText(str(':'))\n    seconds = -1\n    minutes = 0\n    hours = 0\n    seconds_label.setVisible(True)\n    minutes_label.setVisible(True)\n    hours_label.setVisible(True)\n    hm.setVisible(True)\n    ms.setVisible(True)\n    timer1.init(mode=Timer.PERIODIC, period=1000, callback=timer1_cb)\n    client_handle.write('Run started', char2_uuid)\n  if BtnA.wasHold():\n    timer1.init(mode=Timer.ONE_SHOT, period=0, callback=timer1_cb)\n    seconds = seconds - 1\n    client_handle.write('Run finished', char2_uuid)\n  if BtnB.wasClicked():\n    start1.setVisible(True)\n    start2.setVisible(True)\n\n\nif __name__ == '__main__':\n  try:\n    setup()\n    while True:\n      loop()\n  except (Exception, KeyboardInterrupt) as e:\n    try:\n      ble.deinit()\n      from utility import print_error_msg\n      print_error_msg(e)\n    except ImportError:\n      print(\"please update to latest firmware\")\n","customList":[]}